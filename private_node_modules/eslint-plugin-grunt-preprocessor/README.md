# eslint-plugin-grunt-preprocessor

This ESLint plugin will preprocess JS files for any grunt template hooks and replace them as needed.

## Installation

These steps are automatic as part of the zyTools vagrant setup process.

For a local copy, you'll first need to install [ESLint](http://eslint.org):

```
$ npm -g install eslint
```

Next, install `eslint-plugin-grunt-preprocessor`:

`eslint-plugin-grunt-preprocessor` is hosted on our private npm repository; a Digital Ocean droplet that is configured with the private NPM repository server called `Sinopia`. The plug-in can be edited by changing the files in private_node_modules/

To connect to SeaBee you will need to run the following commands to register the server and an authenticated user. Again the following should be done for you by the vagrant setup.sh.

**Note** This auth key provides read only access.

```
sudo npm set registry http://104.236.164.30:4873
sudo npm set always-auth true
sudo npm set email developers@zybooks.com
sudo npm set _auth 'cmVhZG9ubHk6cmVhZG9ubHk=
```

This sever information should also be in the package.json:
```
"publishConfig": {
    "registry": "http://104.236.164.30:4873/"
}
```

**Note:** You may need to log in to the repository with `npm login` if settings change.

After you have connected to the private repository you can install `eslint-plugin-grunt-preprocessor` as usual.

Via terminal:
```
npm install -g eslint-plugin-grunt-preprocessor
```

**Note:** If you installed ESLint globally (using the `-g` flag) then you must also install `eslint-plugin-grunt-preprocessor` globally.

Via package.json:
```
"eslint-plugin-grunt-preprocessor": "^0.0.0",
```


## Usage

Add `grunt-preprocessor` to the plugins section of your `.eslintrc` configuration file. You can omit the `eslint-plugin-` prefix:

```json
{
    "plugins": [
        "grunt-preprocessor"
    ]
}
```
**Note:** `--fix` will not work when a preprocessor is used.


## Publish updated versions to Sinopia on SeaBee

Ensure you are connected to and authenticated with the SeaBee server as described above. You will need to be authenticated with an account that has write permissions.

From the directory of the module run the following:
```
sudo npm publish
```

To override an existing module you will need to update the version number in the node_module package.

# Troubleshooting

*IP Address of Sinopia:* `http://104.236.164.30:4873`

Log in to see hosted packages.

If service has failed it can be restarted by ssh-ing into the server and executing `sudo service sinopia restart`.